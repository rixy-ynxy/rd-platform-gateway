openapi: 3.0.3
info:
  title: Platform Gateway API
  version: 1.0.0
  description: |
    **Platform Gateway**ã¯ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºç´šã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚
    Keycloakèªè¨¼ã€Stripe Connectæ±ºæ¸ˆå‡¦ç†ã€Cloudflare EdgeæŠ€è¡“ã‚’çµ±åˆã—ãŸåŒ…æ‹¬çš„ãªAPIã‚’æä¾›ã—ã¾ã™ã€‚
    
    ## ä¸»ãªç‰¹å¾´
    - ğŸ” **Keycloak OIDC/JWTèªè¨¼**: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºç´šèªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
    - ğŸ’³ **Stripe Connectçµ±åˆ**: ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆæ±ºæ¸ˆå‡¦ç†
    - ğŸ¢ **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ**: çµ„ç¹”å˜ä½ã§ã®ãƒ‡ãƒ¼ã‚¿åˆ†é›¢
    - ğŸ›¡ï¸ **ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: ç´°ã‹ã„æ¨©é™ç®¡ç†
    - ğŸ“Š **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ†æ**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹
    - ğŸŒ **Cloudflare Edge**: é«˜é€Ÿãƒ»ã‚°ãƒ­ãƒ¼ãƒãƒ«é…ä¿¡
    
    ## èªè¨¼æ–¹å¼
    - **JWT Bearer Token**: `Authorization: Bearer <token>`
    - **ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰**: é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ã®èªè¨¼ãªã—ã‚¢ã‚¯ã‚»ã‚¹
    
    ## ãƒ¬ãƒ¼ãƒˆåˆ¶é™
    - **ä¸€èˆ¬API**: 100ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†
    - **èªè¨¼API**: 20ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†
    - **æ±ºæ¸ˆAPI**: 50ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åˆ†
  contact:
    name: Platform Gateway API Support
    url: https://github.com/rixy-ynxy/rd-ai-agent-generator
  license:
    name: MIT License
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://ac94bb42.platform-gateway.pages.dev/api
    description: æœ¬ç•ªç’°å¢ƒ
  - url: http://localhost:3000/api
    description: é–‹ç™ºç’°å¢ƒ

security:
  - bearerAuth: []
  - demoMode: []

paths:
  # =============================================================================
  # èªè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  # =============================================================================
  /auth/login:
    get:
      tags: [èªè¨¼]
      summary: Keycloakãƒ­ã‚°ã‚¤ãƒ³ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
      description: |
        Keycloakèªè¨¼ã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒ­ã‚°ã‚¤ãƒ³ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURLã‚’å–å¾—ã—ã¾ã™ã€‚
        ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯ã€ãƒ¢ãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³URLã‚’è¿”å´ã—ã¾ã™ã€‚
      parameters:
        - name: redirect_uri
          in: query
          schema:
            type: string
            format: uri
          description: ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURL
        - name: state
          in: query
          schema:
            type: string
          description: CSRFä¿è­·ç”¨ã®stateãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
      responses:
        200:
          description: ãƒ­ã‚°ã‚¤ãƒ³URLå–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      login_url:
                        type: string
                        format: uri
                        example: "https://keycloak.example.com/auth/realms/platform/protocol/openid-connect/auth?..."
                      redirect_uri:
                        type: string
                        format: uri
                      state:
                        type: string
                      demo_mode:
                        type: boolean
                        description: ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆtrue
      security: []

  /auth/callback:
    get:
      tags: [èªè¨¼]
      summary: Keycloakèªè¨¼ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
      description: |
        Keycloakã‹ã‚‰ã®èªè¨¼ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å‡¦ç†ã—ã¾ã™ã€‚
        èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã«äº¤æ›ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
      parameters:
        - name: code
          in: query
          required: true
          schema:
            type: string
          description: Keycloakã‹ã‚‰è¿”ã•ã‚ŒãŸèªè¨¼ã‚³ãƒ¼ãƒ‰
        - name: state
          in: query
          required: true
          schema:
            type: string
          description: CSRFä¿è­·ç”¨ã®stateãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
      responses:
        200:
          description: èªè¨¼æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        400:
          description: èªè¨¼å¤±æ•—
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security: []

  /auth/me:
    get:
      tags: [èªè¨¼]
      summary: ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
      description: |
        ç¾åœ¨èªè¨¼ã•ã‚Œã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
        æ¨©é™ã€ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å«ã¿ã¾ã™ã€‚
      responses:
        200:
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'
        401:
          $ref: '#/components/responses/UnauthorizedError'

  /auth/logout:
    post:
      tags: [èªè¨¼]
      summary: ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
      description: |
        ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç„¡åŠ¹åŒ–ã—ã€Keycloakã‹ã‚‰ã‚‚ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã€‚
      responses:
        200:
          description: ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Successfully logged out"

  /auth/refresh:
    post:
      tags: [èªè¨¼]
      summary: ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
      description: |
        ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ›´æ–°ã—ã¾ã™ã€‚
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
                  description: ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³
      responses:
        200:
          description: ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        401:
          $ref: '#/components/responses/UnauthorizedError'

  # =============================================================================
  # ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  # =============================================================================
  /tenants:
    get:
      tags: [ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†]
      summary: ãƒ†ãƒŠãƒ³ãƒˆä¸€è¦§å–å¾—
      description: |
        ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªãƒ†ãƒŠãƒ³ãƒˆä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚
        super_adminã¯å…¨ãƒ†ãƒŠãƒ³ãƒˆã€ãã®ä»–ã¯æ‰€å±ãƒ†ãƒŠãƒ³ãƒˆã®ã¿ã€‚
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
        - name: status
          in: query
          schema:
            type: string
            enum: [active, suspended, trial, inactive]
        - name: plan
          in: query
          schema:
            type: string
            enum: [starter, professional, enterprise, custom]
      responses:
        200:
          description: ãƒ†ãƒŠãƒ³ãƒˆä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Tenant'

    post:
      tags: [ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†]
      summary: æ–°è¦ãƒ†ãƒŠãƒ³ãƒˆä½œæˆ
      description: |
        æ–°ã—ã„ãƒ†ãƒŠãƒ³ãƒˆï¼ˆçµ„ç¹”ï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚
        super_adminã®ã¿å®Ÿè¡Œå¯èƒ½ã€‚
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTenantRequest'
      responses:
        201:
          description: ãƒ†ãƒŠãƒ³ãƒˆä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Tenant'
        403:
          $ref: '#/components/responses/ForbiddenError'

  /tenants/{tenantId}:
    get:
      tags: [ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†]
      summary: ç‰¹å®šãƒ†ãƒŠãƒ³ãƒˆå–å¾—
      description: |
        æŒ‡å®šã•ã‚ŒãŸãƒ†ãƒŠãƒ³ãƒˆã®è©³ç´°æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
      parameters:
        - name: tenantId
          in: path
          required: true
          schema:
            type: string
          description: ãƒ†ãƒŠãƒ³ãƒˆID
      responses:
        200:
          description: ãƒ†ãƒŠãƒ³ãƒˆå–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Tenant'
        404:
          $ref: '#/components/responses/NotFoundError'

    put:
      tags: [ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†]
      summary: ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±æ›´æ–°
      description: |
        ãƒ†ãƒŠãƒ³ãƒˆã®åŸºæœ¬æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã™ã€‚
        tenant_ownerä»¥ä¸Šã®æ¨©é™ãŒå¿…è¦ã€‚
      parameters:
        - name: tenantId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTenantRequest'
      responses:
        200:
          description: ãƒ†ãƒŠãƒ³ãƒˆæ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Tenant'

    delete:
      tags: [ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†]
      summary: ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤
      description: |
        ãƒ†ãƒŠãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã€‚
        super_adminã®ã¿å®Ÿè¡Œå¯èƒ½ã€‚
      parameters:
        - name: tenantId
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Tenant deleted successfully"

  # =============================================================================
  # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  # =============================================================================
  /users:
    get:
      tags: [ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†]
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—
      description: |
        ãƒ†ãƒŠãƒ³ãƒˆå†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚
        adminã¾ãŸã¯manageræ¨©é™ãŒå¿…è¦ã€‚
      parameters:
        - name: tenantId
          in: query
          schema:
            type: string
          description: å¯¾è±¡ãƒ†ãƒŠãƒ³ãƒˆID (super_adminã®ã¿)
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
        - name: role
          in: query
          schema:
            type: string
            enum: [super_admin, tenant_owner, admin, manager, developer, support, user]
        - name: status
          in: query
          schema:
            type: string
            enum: [active, inactive, pending]
      responses:
        200:
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/User'

    post:
      tags: [ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†]
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
      description: |
        æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã€ãƒ†ãƒŠãƒ³ãƒˆã«æ‹›å¾…ã—ã¾ã™ã€‚
        adminã¾ãŸã¯manageræ¨©é™ãŒå¿…è¦ã€‚
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
      responses:
        201:
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'

  /users/{userId}:
    get:
      tags: [ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†]
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°å–å¾—
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'

    put:
      tags: [ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†]
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±æ›´æ–°
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
      responses:
        200:
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/User'

    delete:
      tags: [ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†]
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string

  # =============================================================================
  # æ±ºæ¸ˆå‡¦ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  # =============================================================================
  /payment/billing-summary:
    get:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: è«‹æ±‚æ¦‚è¦ãƒ»ä½¿ç”¨çŠ¶æ³å–å¾—
      description: |
        ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³æƒ…å ±ã€ä½¿ç”¨çŠ¶æ³ã€æ¬¡å›è«‹æ±‚æ—¥ãªã©ã®
        è«‹æ±‚æ¦‚è¦ã‚’å–å¾—ã—ã¾ã™ã€‚
      parameters:
        - name: tenantId
          in: query
          schema:
            type: string
          description: å¯¾è±¡ãƒ†ãƒŠãƒ³ãƒˆID (æ¨©é™ãŒã‚ã‚Œã°)
      responses:
        200:
          description: è«‹æ±‚æ¦‚è¦å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/BillingSummary'

  /payment/methods:
    get:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: æ±ºæ¸ˆæ–¹æ³•ä¸€è¦§å–å¾—
      description: |
        ãƒ†ãƒŠãƒ³ãƒˆã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹æ±ºæ¸ˆæ–¹æ³•ï¼ˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç­‰ï¼‰
        ã®ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚
      parameters:
        - name: tenantId
          in: query
          schema:
            type: string
      responses:
        200:
          description: æ±ºæ¸ˆæ–¹æ³•ä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/PaymentMethod'

    post:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: æ±ºæ¸ˆæ–¹æ³•è¿½åŠ 
      description: |
        æ–°ã—ã„æ±ºæ¸ˆæ–¹æ³•ã‚’è¿½åŠ ã—ã¾ã™ã€‚
        Stripe Payment Methodã‚’ä½¿ç”¨ã€‚
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                payment_method_id:
                  type: string
                  description: Stripe Payment Method ID
                is_default:
                  type: boolean
                  description: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ±ºæ¸ˆæ–¹æ³•ã«è¨­å®šã™ã‚‹ã‹
      responses:
        201:
          description: æ±ºæ¸ˆæ–¹æ³•è¿½åŠ æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/PaymentMethod'

  /payment/methods/{methodId}/set-default:
    post:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ±ºæ¸ˆæ–¹æ³•è¨­å®š
      parameters:
        - name: methodId
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šæˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string

  /payment/methods/{methodId}:
    delete:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: æ±ºæ¸ˆæ–¹æ³•å‰Šé™¤
      parameters:
        - name: methodId
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: æ±ºæ¸ˆæ–¹æ³•å‰Šé™¤æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string

  /payment/invoices:
    get:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: è«‹æ±‚æ›¸ä¸€è¦§å–å¾—
      description: |
        è«‹æ±‚æ›¸ã®ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™ã€‚
        ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯¾å¿œã€‚
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
        - name: status
          in: query
          schema:
            type: string
            enum: [paid, unpaid, overdue, draft]
        - name: tenantId
          in: query
          schema:
            type: string
      responses:
        200:
          description: è«‹æ±‚æ›¸ä¸€è¦§å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Invoice'

  /payment/invoices/{invoiceId}:
    get:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: å€‹åˆ¥è«‹æ±‚æ›¸è©³ç´°
      parameters:
        - name: invoiceId
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: è«‹æ±‚æ›¸è©³ç´°å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Invoice'

  /payment/invoices/{invoiceId}/download:
    get:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: è«‹æ±‚æ›¸PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
      description: |
        è«‹æ±‚æ›¸ã®PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
      parameters:
        - name: invoiceId
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æˆåŠŸ
          content:
            application/pdf:
              schema:
                type: string
                format: binary

  /payment/connect-account:
    post:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: Stripe Connectã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
      description: |
        ãƒ†ãƒŠãƒ³ãƒˆç”¨ã®Stripe Connectã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
      responses:
        201:
          description: Connectã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      account_id:
                        type: string
                        description: Stripe Connect ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID

  /payment/connect-account/onboarding-link:
    post:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒªãƒ³ã‚¯ä½œæˆ
      description: |
        Stripe Connectã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®è¨­å®šç”¨
        ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒªãƒ³ã‚¯ã‚’ä½œæˆã—ã¾ã™ã€‚
      responses:
        201:
          description: ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒªãƒ³ã‚¯ä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      onboarding_url:
                        type: string
                        format: uri

  /payment/connect-account/status:
    get:
      tags: [æ±ºæ¸ˆå‡¦ç†]
      summary: Connectã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
      description: |
        Stripe Connectã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨
        è¨­å®šå®Œäº†çŠ¶æ³ã‚’å–å¾—ã—ã¾ã™ã€‚
      responses:
        200:
          description: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/ConnectAccountStatus'

  # =============================================================================
  # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»åˆ†æã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  # =============================================================================
  /dashboard/stats:
    get:
      tags: [ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
      summary: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±è¨ˆ
      description: |
        ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤ºç”¨ã®åŸºæœ¬çµ±è¨ˆæƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
        ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã€APIå‘¼ã³å‡ºã—æ•°ã€åç›Šç­‰ã€‚
      parameters:
        - name: tenantId
          in: query
          schema:
            type: string
          description: å¯¾è±¡ãƒ†ãƒŠãƒ³ãƒˆID (æ¨©é™ãŒã‚ã‚Œã°)
        - name: timeframe
          in: query
          schema:
            type: string
            enum: [today, week, month, quarter, year]
            default: month
      responses:
        200:
          description: çµ±è¨ˆæƒ…å ±å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/DashboardStats'

  /dashboard/metrics/api-calls:
    get:
      tags: [ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
      summary: APIå‘¼ã³å‡ºã—ãƒ¡ãƒˆãƒªã‚¯ã‚¹
      description: |
        æ™‚ç³»åˆ—ã®APIå‘¼ã³å‡ºã—æ•°ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–å¾—ã—ã¾ã™ã€‚
        ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºç”¨ãƒ‡ãƒ¼ã‚¿ã€‚
      parameters:
        - name: timeframe
          in: query
          schema:
            type: string
            enum: [24h, 7d, 30d, 90d]
            default: 7d
        - name: granularity
          in: query
          schema:
            type: string
            enum: [hour, day, week]
            default: day
      responses:
        200:
          description: ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Metric'

  /dashboard/activities:
    get:
      tags: [ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
      summary: æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£
      description: |
        æœ€è¿‘ã®ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ­ã‚°ã‚’å–å¾—ã—ã¾ã™ã€‚
        ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³ã€APIå‘¼ã³å‡ºã—ã€æ±ºæ¸ˆã‚¤ãƒ™ãƒ³ãƒˆç­‰ã€‚
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
        - name: type
          in: query
          schema:
            type: string
            enum: [login, api_call, payment, user_action]
      responses:
        200:
          description: ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å–å¾—æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Activity'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT Bearer Token (Keycloakç™ºè¡Œ)
    
    demoMode:
      type: apiKey
      in: header
      name: X-Demo-Mode
      description: ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ç”¨èªè¨¼ (é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã¿)

  schemas:
    # =============================================================================
    # åŸºæœ¬ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹
    # =============================================================================
    ApiResponse:
      type: object
      properties:
        success:
          type: boolean
          description: APIå‘¼ã³å‡ºã—ã®æˆåŠŸå¯å¦
        message:
          type: string
          description: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        data:
          description: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿
    
    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        code:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰
        details:
          type: object
          description: ã‚¨ãƒ©ãƒ¼è©³ç´°æƒ…å ±
    
    PaginatedResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: array
          description: ãƒ‡ãƒ¼ã‚¿é…åˆ—
        pagination:
          type: object
          properties:
            total:
              type: integer
              description: ç·ä»¶æ•°
            limit:
              type: integer
              description: 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°
            offset:
              type: integer
              description: ã‚ªãƒ•ã‚»ãƒƒãƒˆ
            has_more:
              type: boolean
              description: æ¬¡ãƒšãƒ¼ã‚¸ã®æœ‰ç„¡

    # =============================================================================
    # èªè¨¼é–¢é€£
    # =============================================================================
    AuthResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            access_token:
              type: string
              description: JWTã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³
            refresh_token:
              type: string
              description: ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³
            token_type:
              type: string
              example: "Bearer"
            expires_in:
              type: integer
              description: ãƒˆãƒ¼ã‚¯ãƒ³æœ‰åŠ¹æœŸé™ï¼ˆç§’ï¼‰
            user:
              $ref: '#/components/schemas/User'

    User:
      type: object
      properties:
        id:
          type: string
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
          example: "user-123abc"
        email:
          type: string
          format: email
          description: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
          example: "user@example.com"
        name:
          type: string
          description: è¡¨ç¤ºå
          example: "ç”°ä¸­å¤ªéƒ"
        username:
          type: string
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼å
          example: "tanaka_taro"
        tenant_id:
          type: string
          description: æ‰€å±ãƒ†ãƒŠãƒ³ãƒˆID
          example: "tenant-acme-corp"
        roles:
          type: array
          items:
            type: string
            enum: [super_admin, tenant_owner, admin, manager, developer, support, user]
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«
          example: ["admin", "manager"]
        status:
          type: string
          enum: [active, inactive, pending]
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
          example: "active"
        profile:
          type: object
          properties:
            avatar_url:
              type: string
              format: uri
            department:
              type: string
            job_title:
              type: string
            phone:
              type: string
        keycloak_id:
          type: string
          description: Keycloakã§ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
        last_login_at:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    # =============================================================================
    # ãƒ†ãƒŠãƒ³ãƒˆé–¢é€£
    # =============================================================================
    Tenant:
      type: object
      properties:
        id:
          type: string
          description: ãƒ†ãƒŠãƒ³ãƒˆID
          example: "tenant-acme-corp"
        name:
          type: string
          description: çµ„ç¹”å
          example: "ACME Corporation"
        domain:
          type: string
          description: ãƒ‰ãƒ¡ã‚¤ãƒ³å
          example: "acme-corp.com"
        status:
          type: string
          enum: [active, suspended, trial, inactive]
          description: ãƒ†ãƒŠãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
          example: "active"
        plan:
          type: string
          enum: [starter, professional, enterprise, custom]
          description: å¥‘ç´„ãƒ—ãƒ©ãƒ³
          example: "professional"
        keycloak_realm:
          type: string
          description: Keycloakãƒ¬ãƒ«ãƒ å
          example: "acme-corp-realm"
        stripe_customer_id:
          type: string
          description: Stripeé¡§å®¢ID
        stripe_connect_account_id:
          type: string
          description: Stripe Connectã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
        billing_email:
          type: string
          format: email
          description: è«‹æ±‚å…ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
        billing_address:
          type: string
          description: è«‹æ±‚å…ˆä½æ‰€
        billing_country:
          type: string
          description: è«‹æ±‚å…ˆå›½
        settings:
          type: object
          properties:
            api_rate_limit:
              type: integer
            webhook_enabled:
              type: boolean
            audit_log_retention_days:
              type: integer
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateTenantRequest:
      type: object
      required: [name, domain, billing_email]
      properties:
        name:
          type: string
          description: çµ„ç¹”å
          example: "æ–°ã—ã„ä¼šç¤¾"
        domain:
          type: string
          description: ãƒ‰ãƒ¡ã‚¤ãƒ³å
          example: "newcompany.com"
        plan:
          type: string
          enum: [starter, professional, enterprise, custom]
          default: starter
        billing_email:
          type: string
          format: email
          description: è«‹æ±‚å…ˆãƒ¡ãƒ¼ãƒ«
          example: "billing@newcompany.com"
        billing_address:
          type: string
        billing_country:
          type: string

    UpdateTenantRequest:
      type: object
      properties:
        name:
          type: string
        status:
          type: string
          enum: [active, suspended, trial, inactive]
        plan:
          type: string
          enum: [starter, professional, enterprise, custom]
        billing_email:
          type: string
          format: email
        billing_address:
          type: string
        billing_country:
          type: string
        settings:
          type: object

    # =============================================================================
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£
    # =============================================================================
    CreateUserRequest:
      type: object
      required: [email, name, roles]
      properties:
        email:
          type: string
          format: email
          example: "newuser@example.com"
        name:
          type: string
          example: "æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼"
        username:
          type: string
        roles:
          type: array
          items:
            type: string
            enum: [admin, manager, developer, support, user]
          example: ["user"]
        profile:
          type: object
          properties:
            department:
              type: string
            job_title:
              type: string
            phone:
              type: string
        send_invitation:
          type: boolean
          default: true
          description: æ‹›å¾…ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã™ã‚‹ã‹

    UpdateUserRequest:
      type: object
      properties:
        name:
          type: string
        roles:
          type: array
          items:
            type: string
        status:
          type: string
          enum: [active, inactive, pending]
        profile:
          type: object

    # =============================================================================
    # æ±ºæ¸ˆé–¢é€£
    # =============================================================================
    BillingSummary:
      type: object
      properties:
        current_plan:
          type: object
          properties:
            name:
              type: string
              example: "Professional"
            price:
              type: number
              example: 99.00
            currency:
              type: string
              example: "USD"
            billing_cycle:
              type: string
              enum: [monthly, yearly]
              example: "monthly"
        usage:
          type: object
          properties:
            api_calls:
              type: object
              properties:
                current:
                  type: integer
                  example: 15420
                limit:
                  type: integer
                  example: 50000
                percentage:
                  type: number
                  example: 30.84
            users:
              type: object
              properties:
                current:
                  type: integer
                  example: 12
                limit:
                  type: integer
                  example: 50
            storage:
              type: object
              properties:
                current:
                  type: number
                  example: 2.3
                limit:
                  type: number
                  example: 100
                unit:
                  type: string
                  example: "GB"
        next_billing_date:
          type: string
          format: date
          example: "2024-11-01"
        payment_method:
          $ref: '#/components/schemas/PaymentMethod'

    PaymentMethod:
      type: object
      properties:
        id:
          type: string
          example: "pm_1234567890"
        type:
          type: string
          enum: [card, bank_account]
          example: "card"
        card:
          type: object
          properties:
            brand:
              type: string
              example: "visa"
            last4:
              type: string
              example: "4242"
            exp_month:
              type: integer
              example: 12
            exp_year:
              type: integer
              example: 2025
        is_default:
          type: boolean
          example: true
        stripe_payment_method_id:
          type: string
        created_at:
          type: string
          format: date-time

    Invoice:
      type: object
      properties:
        id:
          type: string
          example: "inv_1234567890"
        tenant_id:
          type: string
        amount_total:
          type: number
          example: 99.00
        amount_paid:
          type: number
          example: 99.00
        currency:
          type: string
          example: "USD"
        status:
          type: string
          enum: [paid, unpaid, overdue, draft]
          example: "paid"
        stripe_invoice_id:
          type: string
        invoice_number:
          type: string
          example: "INV-2024-001"
        billing_period_start:
          type: string
          format: date
        billing_period_end:
          type: string
          format: date
        due_date:
          type: string
          format: date
        paid_at:
          type: string
          format: date-time
        invoice_pdf:
          type: string
          format: uri
        line_items:
          type: array
          items:
            type: object
            properties:
              description:
                type: string
              quantity:
                type: integer
              unit_amount:
                type: number
              amount:
                type: number
        created_at:
          type: string
          format: date-time

    ConnectAccountStatus:
      type: object
      properties:
        account_id:
          type: string
        charges_enabled:
          type: boolean
        payouts_enabled:
          type: boolean
        details_submitted:
          type: boolean
        requirements:
          type: object
          properties:
            currently_due:
              type: array
              items:
                type: string
            eventually_due:
              type: array
              items:
                type: string
            disabled_reason:
              type: string
        capabilities:
          type: object

    # =============================================================================
    # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é–¢é€£
    # =============================================================================
    DashboardStats:
      type: object
      properties:
        users:
          type: object
          properties:
            total:
              type: integer
              example: 245
            active:
              type: integer
              example: 189
            growth:
              type: number
              example: 12.5
              description: æˆé•·ç‡ï¼ˆ%ï¼‰
        api_calls:
          type: object
          properties:
            today:
              type: integer
              example: 1543
            this_month:
              type: integer
              example: 45670
            growth:
              type: number
              example: 8.2
        revenue:
          type: object
          properties:
            this_month:
              type: number
              example: 24350.00
            last_month:
              type: number
              example: 22100.00
            currency:
              type: string
              example: "USD"
            growth:
              type: number
              example: 10.2
        tenants:
          type: object
          properties:
            total:
              type: integer
              example: 34
            active:
              type: integer
              example: 28
            trial:
              type: integer
              example: 6

    Metric:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
          example: "2024-10-04T12:00:00Z"
        value:
          type: number
          example: 1250
        label:
          type: string
          example: "API Calls"

    Activity:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
          enum: [login, api_call, payment, user_action]
        description:
          type: string
          example: "User logged in successfully"
        user_id:
          type: string
        tenant_id:
          type: string
        ip_address:
          type: string
        user_agent:
          type: string
        metadata:
          type: object
        created_at:
          type: string
          format: date-time

  responses:
    UnauthorizedError:
      description: èªè¨¼ã‚¨ãƒ©ãƒ¼ - æœ‰åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ãŒå¿…è¦
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            error: "Unauthorized: Invalid or missing token"
            code: "AUTH_REQUIRED"

    ForbiddenError:
      description: èªå¯ã‚¨ãƒ©ãƒ¼ - æ¨©é™ä¸è¶³
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            error: "Forbidden: Insufficient permissions"
            code: "INSUFFICIENT_PERMISSIONS"

    NotFoundError:
      description: ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            error: "Resource not found"
            code: "NOT_FOUND"

    ValidationError:
      description: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            error: "Validation failed"
            code: "VALIDATION_ERROR"
            details:
              field: "email"
              message: "Invalid email format"

tags:
  - name: èªè¨¼
    description: Keycloak OIDC/JWTèªè¨¼é–¢é€£API
  - name: ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†
    description: ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆçµ„ç¹”ç®¡ç†API
  - name: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
    description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ­ãƒ¼ãƒ«ç®¡ç†API
  - name: æ±ºæ¸ˆå‡¦ç†
    description: Stripe Connectæ±ºæ¸ˆãƒ»è«‹æ±‚API
  - name: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
    description: åˆ†æãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»çµ±è¨ˆAPI